<mvc:View
  controllerName="inch_dp_consulta-facturas-compras.controller.Home"
  displayBlock="true"
  xmlns:uxap="sap.uxap"
  xmlns:layout="sap.ui.layout" 
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
  xmlns:smartTable="sap.ui.comp.smarttable"
  xmlns:html="http://www.w3.org/1999/xhtml"
  xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
  xmlns:t="sap.ui.table"
  xmlns:core="sap.ui.core">
  <App id="idAppControl" >
    <pages>
      <Page title="{i18n>title}">

      <uxap:ObjectPageLayout id="ObjectPageLayout" showTitleInHeaderContent="true" upperCaseAnchorBar="false">
	<uxap:headerTitle>
	<uxap:ObjectPageDynamicHeaderTitle>
			<uxap:expandedHeading>
			<FlexBox fitContainer="true" alignItems="Center">
			<Avatar src="sap-icon://manager-insight" backgroundColor="Random" displaySize="L" class="sapUiTinyMarginEnd"/>
             <layout:VerticalLayout class="sapUiSmallMarginBeginEnd">	
             <ObjectStatus id="tNamefb"    text="Desconocido" wrapping="true" class="UserName"/>	
			 <ObjectStatus title="PaÃ­s"    text="{datoMarca>/Land1} - {datoMarca>/Landx}"/>	
			 <ObjectStatus title="Marca"   text="{datoMarca>/VtextKondm}"/>
			 <ObjectStatus title="Cliente" text="{datoDealerCab>/Partner} - {datoDealerCab>/NamePartner}"/>						
			</layout:VerticalLayout>
			</FlexBox>			
			</uxap:expandedHeading>

			<uxap:snappedHeading>
				<FlexBox fitContainer="true" alignItems="Center">				
					<Avatar src="sap-icon://manager-insight" backgroundColor="Random" class="sapUiTinyMarginEnd"/>
					<layout:VerticalLayout class="sapUiSmallMarginBeginEnd">
					<ObjectStatus id="tName"    text="Desconocido" wrapping="true" />					
					<ObjectStatus title="Cliente" text="{datoDealerCab>/Partner} - {datoDealerCab>/NamePartner}"/>	
				</layout:VerticalLayout>
				</FlexBox>				
			</uxap:snappedHeading>

			<uxap:actions>
			  <Label text="Cliente" />
			  <Input id="idDealers" type="Text" showSuggestion="true" showValueHelp="true" valueHelpRequest="onMostrarDealers"
			  suggestionItems="{/aDealers}" change="onLeaveMatchCodeDealer" width="15rem">
			  <suggestionItems>
			  	<core:Item text="{Partner} - {NamePartner}"/>
			  </suggestionItems>
			  </Input>
			   <Label text="Marca"/>
			  <Select		
			      change="onchangeMarcaPais"
			      width="12rem"						    
                  id="idMarca"
			  	showSecondaryValues= "true"
			  	items="{
			  		path: '/aMarcasPais'										
			  	}">
			  	<core:Item key="{Land1} - {Landx} - {Kondm} - {VtextKondm}" text="{VtextKondm} - {Landx}"/>
			  </Select>				
			</uxap:actions>

		</uxap:ObjectPageDynamicHeaderTitle>
		
	</uxap:headerTitle>

			<uxap:sections>
			<uxap:ObjectPageSection>
				<uxap:subSections>
					<uxap:ObjectPageSubSection title="Reporte" titleUppercase="false">
						<uxap:blocks>

              <VBox id="vbox" fitContainer="true">
                <smartFilterBar:SmartFilterBar id="sfconsultaFacturas" showFilterConfiguration="false"  entitySet="CONSULTA_FACTURASSet" persistencyKey="pksfconsultaFacturas" >
				<smartFilterBar:controlConfiguration>
				    <smartFilterBar:ControlConfiguration key="Npf" visibleInAdvancedArea="true">
					</smartFilterBar:ControlConfiguration>			
					<smartFilterBar:ControlConfiguration key="FechaDocumento" visibleInAdvancedArea="true" mandatory="mandatory">
					</smartFilterBar:ControlConfiguration>						
					<smartFilterBar:ControlConfiguration key="PedidoCliente" visibleInAdvancedArea="true">
					</smartFilterBar:ControlConfiguration>
					<smartFilterBar:ControlConfiguration key="NumeroFactura" visibleInAdvancedArea="true">
					</smartFilterBar:ControlConfiguration>
					 <smartFilterBar:ControlConfiguration key="ClaseDocumento" visibleInAdvancedArea="true">
                     <smartFilterBar:customControl>
                     <Select id="clspedidoList" 
                     items="{path: '/aclspedido'}">
                     <core:ListItem key="{Auart}" text="{Bezei}"/>                   
                     </Select>
                   </smartFilterBar:customControl>
                  </smartFilterBar:ControlConfiguration> 
				   <smartFilterBar:ControlConfiguration key="Estatus" visibleInAdvancedArea="true" label="Estado pedido">
                   <smartFilterBar:customControl>
                    <Select id="idEstatus" 
                    items="{path: '/aEstatus'}">
                    <core:ListItem key="{Domvalue}" text="{Ddtext}" />                   
                   </Select>
                   </smartFilterBar:customControl>
                  </smartFilterBar:ControlConfiguration>
				</smartFilterBar:controlConfiguration>	
				</smartFilterBar:SmartFilterBar>
                <smartTable:SmartTable id="stconsultaFacturas" beforeRebindTable="onbrtconsultaFacturas" 
				initiallyVisibleFields="PedidoCliente,FechaDocumento,ClaseDocumento,DescClaseDocumento,MotivoPedido,DescMotivoPedido,PosicionPedido,Material,DescMaterial,Npf,Um,CantidadDocumento,EstatusTxt,ImporteNeto,Moneda,NumeroFactura,FechaFactura,PosFactura,Cantidad,Importe,FechaVencimiento,EstatusPago" requestAtLeastFields="LinkPdf" entitySet="CONSULTA_FACTURASSet" smartFilterId="sfconsultaFacturas" tableType="Table" useExportToExcel="true" beforeExport="onBeforeExport" useVariantManagement="true" useTablePersonalisation="true" showRowCount="true" persistencyKey="pkstconsultaFacturas" enableAutoBinding="false" class="sapUiResponsiveContentPadding" enableAutoColumnWidth="true" editTogglable="false" app:useSmartToggle="true">
                  <smartTable:layoutData>
                    <FlexItemData growFactor="1" baseSize="0%"/>
                  </smartTable:layoutData>
				  <smartTable:customToolbar>
					<OverflowToolbar design="Transparent">
						<ToolbarSpacer/>
						<OverflowToolbarButton  id="btnPdfFactura" icon="sap-icon://pdf-reader" tooltip="Ver Factura" text="Ver Factura"
							press="onVerFactura"/>
					</OverflowToolbar>
				</smartTable:customToolbar>
				  	<t:Table selectionMode="Single">
					</t:Table>
                </smartTable:SmartTable>
              </VBox>

          	</uxap:blocks>
          </uxap:ObjectPageSubSection>
				</uxap:subSections>
			</uxap:ObjectPageSection>
		</uxap:sections>

	</uxap:ObjectPageLayout>

      </Page>
    </pages>
  </App>
</mvc:View>